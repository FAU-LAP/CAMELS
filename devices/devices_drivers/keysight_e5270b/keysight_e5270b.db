record(ao, "$(SETUP):keysight_e5270b:setV1")
{
    field (DESC, "Set Voltage")
    field (DTYP, "stream")
    field (OUT,  "@keysight_e5270b.proto setChV(1, $(SETUP):keysight_e5270b:VoutRange1, $(SETUP):keysight_e5270b:currComp1) $(PORT) $(G)")
    field (PREC, "4")
    field (PINI, "NO")
	field (TPRO, "1")
	field (EGU, "V")
}

record(ao, "$(SETUP):keysight_e5270b:currComp1")
{
	#field (FLNK, "$(SETUP):keysight_e5270b:setV1")
}

record(longout, "$(SETUP):keysight_e5270b:VoutRange1")
{
	#field (FLNK, "$(SETUP):keysight_e5270b:setV1")
}

record(ao, "$(SETUP):keysight_e5270b:setI1")
{
    field (DESC, "Set current")
    field (DTYP, "stream")
    field (OUT,  "@keysight_e5270b.proto setChI(1, $(SETUP):keysight_e5270b:IoutRange1, $(SETUP):keysight_e5270b:voltComp1) $(PORT) $(G)")
    field (PREC, "4")
    field (PINI, "NO")
    field (TPRO, "1")
	field (EGU, "I")
}

record(ao, "$(SETUP):keysight_e5270b:voltComp1")
{
	#field (FLNK, "$(SETUP):keysight_e5270b:setI1")
}

record(longout, "$(SETUP):keysight_e5270b:IoutRange1")
{
	#field (FLNK, "$(SETUP):keysight_e5270b:setI1")
}

record(longout, "$(SETUP):keysight_e5270b:VmeasRange1")
{
	#field(FLNK, "$(SETUP):keysight_e5270b:mesV1")
	field(DTYP, "stream")
	field(OUT, "@keysight_e5270b.proto VmeasRange(1) $(PORT) $(G)")
	field(MDEL, "-1")
}

record(longout, "$(SETUP):keysight_e5270b:ImeasRange1")
{
	#field(FLNK, "$(SETUP):keysight_e5270b:mesI1")
	field(DTYP, "stream")
	field(OUT, "@keysight_e5270b.proto ImeasRange(1) $(PORT) $(G)")
}

record(bo, "$(SETUP):keysight_e5270b:enable1")
{
    field (DESC, "Enable Channel")
    field (DTYP, "stream")
    field (OUT,  "@keysight_e5270b.proto enChN(1) $(PORT) $(G)")
    field (PINI, "0")
    field (TPRO, "1")
    field (SCAN, "Passive")
	field (ONAM, "CN")
	field (ZNAM, "CL")
}

record(ai, "$(SETUP):keysight_e5270b:mesV1")
{
    field (DESC, "Measure Voltage")
	field (DTYP, "stream")
    field (INP, "@keysight_e5270b.proto mesV(1) $(PORT) $(G) CCP")
    field (PINI, "0")
    field (TPRO, "1")
	field (SCAN, "Passive")
	field (MDEL, "-1")
	field (EGU, "V")
}

record(bo, "$(SETUP):keysight_e5270b:mesV1:trig")
{
	field(FLNK, "$(SETUP):keysight_e5270b:mesV1")
}

record(bo, "$(SETUP):keysight_e5270b:mesI1:trig")
{
	field(FLNK, "$(SETUP):keysight_e5270b:mesI1")
}

record(ai, "$(SETUP):keysight_e5270b:mesI1")
{
    field (DESC, "Measure Voltage")
	field (DTYP, "stream")
    field (INP, "@keysight_e5270b.proto mesI(1) $(PORT) $(G) CCP")
    field (PINI, "0")
    field (TPRO, "1")
	field (SCAN, "Passive")
	field (EGU, "I")
	field (MDEL, "-1")
}

# 1 for high resolution, 0 for high speed
record(bo, "$(SETUP):keysight_e5270b:setADC1")
{
	field(DTYP, "stream")
	field(OUT, "@keysight_e5270b.proto setADC(1) $(PORT) $(G)")
}

record(bo, "$(SETUP):keysight_e5270b:outputFilter1")
{
	field(DTYP, "stream")
	field(OUT, "@keysight_e5270b.proto outputFilter(1) $(PORT) $(G)")
}

record(longout, "$(SETUP):keysight_e5270b:speedADCPLC")
{
	field(DTYP, "stream")
	field(OUT, "@keysight_e5270b.proto confADC(0, $(SETUP):keysight_e5270b:speedADCmode) $(PORT) $(G)")
}

# 0 for auto, 1 for manual, 2 for PLC
record(longout, "$(SETUP):keysight_e5270b:speedADCmode")
{
	field(FLNK, "$(SETUP):keysight_e5270b:speedADCPLC")
}

record(longout, "$(SETUP):keysight_e5270b:resADCPLC")
{
	field(DTYP, "stream")
	field(OUT, "@keysight_e5270b.proto confADC(1, $(SETUP):keysight_e5270b:resADCmode) $(PORT) $(G)")
}

# 0 for auto, 1 for manual, 2 for PLC
record(longout, "$(SETUP):keysight_e5270b:resADCmode")
{
	field(FLNK, "$(SETUP):keysight_e5270b:resADCPLC")
}


record(stringin, "$(SETUP):keysight_e5270b:idn")
{
    field (DESC, "Identify SMU E5270")
    field (DTYP, "stream")
    field (INP,  "@keysight_e5270b.proto idn $(PORT) $(G)")
    field (PINI, "1")
    field (TPRO, "1")
}

record(stringin, "$(SETUP):keysight_e5270b:err")
{
    field (DESC, "Identify SMU E5270")
    field (DTYP, "stream")
    field (INP,  "@keysight_e5270b.proto getErr $(PORT) $(G)")
    field (PINI, "NO")
    field (TPRO, "1")
}

record(bo, "$(SETUP):keysight_e5270b:err:trig")
{
	field(FLNK, "$(SETUP):keysight_e5270b:err")
}

# 1 Spot, 2 Staircase Sweep, 3 Pulsed Spot, 4 Pulsed Sweep, 5 Staircase sweep + pulsed bias, 9 Quasi-pulsed spot, 14 Linear search, 15 binary search, 16 Multi channel sweep
record(longout, "$(SETUP):keysight_e5270b:measMode1")
{
	field (DTYP, "stream")
	field (OUT, "@keysight_e5270b.proto setMeas(1) $(PORT) $(G)")
	field (PINI, "1")
	field (SCAN, "Passive")
	field (VAL, "1")
}

record (ao, "$(SETUP):keysight_e5270b:setFMT")
{
	field (DESC, "Set format of Data")
	field (DTYP, "stream")
    field (OUT, "@keysight_e5270b.proto setFMT $(PORT) $(G)")
    field (PINI, "1")
    field (TPRO, "1")
	field (SCAN, "Passive")
}


record (stringout, "$(SETUP):keysight_e5270b:wstr")
{
	field (DESC, "write string to SMU")
    field (PINI, "0")
    field (TPRO, "1")
	field (SCAN, "Passive")
	field (OMSL, "0")
	field (FLNK, "$(SETUP):keysight_e5270b:RWstr")
}

record (stringin, "$(SETUP):keysight_e5270b:RWstr")
{
	field (DESC, "write string to SMU")
	field (DTYP, "stream")
    field (INP, "@keysight_e5270b.proto ws($(SETUP):keysight_e5270b:wstr) $(PORT) $(G)")
    field (PINI, "0")
    field (TPRO, "1")
	field (SCAN, "Passive")
}